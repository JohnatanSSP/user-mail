<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/User_InGress/src/main/java/johnatanSSP/user_InGress/service/UserService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/User_InGress/src/main/java/johnatanSSP/user_InGress/service/UserService.java" />
              <option name="originalContent" value="package johnatanSSP.user_InGress.service;&#10;&#10;import jakarta.transaction.Transactional;&#10;import johnatanSSP.user_InGress.domain.UserModel;&#10;import johnatanSSP.user_InGress.exception.EmailAlreadyUsedException;&#10;import johnatanSSP.user_InGress.producer.UserProducer;&#10;import johnatanSSP.user_InGress.repositorie.UserRepository;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.util.List;&#10;import java.util.UUID;&#10;&#10;@Service&#10;public class UserService {&#10;&#10;    @Autowired&#10;    private final UserRepository Repository;&#10;&#10;    @Autowired&#10;    private final UserProducer Producer;&#10;&#10;    public UserService(UserRepository repository, UserProducer producer) {&#10;        Repository = repository;&#10;        Producer = producer;&#10;    }&#10;&#10;    @Transactional&#10;    public UserModel saveAndPublish(UserModel user) {&#10;        // check duplicate email&#10;        if (user.getEmail() != null &amp;&amp; Repository.existsByEmail(user.getEmail())) {&#10;            throw new EmailAlreadyUsedException(user.getEmail());&#10;        }&#10;        user = Repository.save(user);&#10;        Producer.publishEvent(user);&#10;        return user;&#10;    }&#10;&#10;    public List&lt;UserModel&gt; getAllUsers() {&#10;        return Repository.findAll();&#10;    }&#10;&#10;    @Transactional&#10;    public void deleteById(UUID id) {&#10;        Repository.deleteById(id);&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package johnatanSSP.user_InGress.service;&#13;&#10;&#13;&#10;import jakarta.transaction.Transactional;&#13;&#10;import johnatanSSP.user_InGress.domain.UserModel;&#13;&#10;import johnatanSSP.user_InGress.exception.EmailAlreadyUsedException;&#13;&#10;import johnatanSSP.user_InGress.producer.UserProducer;&#13;&#10;import johnatanSSP.user_InGress.repositorie.UserRepository;&#13;&#10;import org.springframework.beans.factory.annotation.Autowired;&#13;&#10;import org.springframework.stereotype.Service;&#13;&#10;&#13;&#10;import java.util.List;&#13;&#10;import java.util.UUID;&#13;&#10;&#13;&#10;@Service&#13;&#10;public class UserService {&#13;&#10;&#13;&#10;    @Autowired&#13;&#10;    private final UserRepository Repository;&#13;&#10;&#13;&#10;    @Autowired&#13;&#10;    private final UserProducer Producer;&#13;&#10;&#13;&#10;    public UserService(UserRepository repository, UserProducer producer) {&#13;&#10;        Repository = repository;&#13;&#10;        Producer = producer;&#13;&#10;    }&#13;&#10;&#13;&#10;    @Transactional&#13;&#10;    public UserModel saveAndPublish(UserModel user) {&#13;&#10;        // check duplicate email&#13;&#10;        if (user.getEmail() != null &amp;&amp; Repository.existsByEmail(user.getEmail())) {&#13;&#10;            throw new EmailAlreadyUsedException(user.getEmail());&#13;&#10;        }&#13;&#10;        user = Repository.save(user);&#13;&#10;        Producer.publishEvent(user);&#13;&#10;        return user;&#13;&#10;    }&#13;&#10;&#13;&#10;    public List&lt;UserModel&gt; getAllUsers() {&#13;&#10;        return Repository.findAll();&#13;&#10;    }&#13;&#10;&#13;&#10;    @Transactional&#13;&#10;    public void deleteById(UUID id) {&#13;&#10;        Repository.deleteById(id);&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/User_InGress/src/main/resources/db/migration/V1__create_tb_users.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/User_InGress/src/main/resources/db/migration/V1__create_tb_users.sql" />
              <option name="originalContent" value="-- V1__create_tb_users.sql&#10;-- Create extension for generating UUIDs and the USERS_TB table&#10;&#10;-- Create pgcrypto extension if not exists (required for gen_random_uuid)&#10;CREATE EXTENSION IF NOT EXISTS pgcrypto;&#10;&#10;CREATE TABLE IF NOT EXISTS USERS_TB (&#10;    UserId UUID PRIMARY KEY DEFAULT gen_random_uuid(),&#10;    name VARCHAR(255) NOT NULL,&#10;    email VARCHAR(255) NOT NULL UNIQUE&#10;);&#10;" />
              <option name="updatedContent" value="-- V1__create_tb_users.sql&#10;-- Create extension for generating UUIDs and the USERS_TB table&#10;&#10;-- Create pgcrypto extension if not exists (required for gen_random_uuid)&#10;CREATE EXTENSION IF NOT EXISTS pgcrypto;&#10;&#10;CREATE TABLE IF NOT EXISTS USERS_TB (&#10;    UserId UUID PRIMARY KEY DEFAULT gen_random_uuid(),&#10;    name VARCHAR(255) NOT NULL,&#10;    email VARCHAR(255) NOT NULL UNIQUE&#10;);&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>